<?php
/**
 * @file
 * Code for the PNW Insect feature.
 */

include_once 'pnw_insect.features.inc';

/**
 * Implements hook_menu_block_blocks().
 */
function pnw_insect_menu_block_blocks() {
  // The array key is the block delta used by menu block.
  return array(
    'pnw_insect-1' => array(
      'menu_name'   => MENU_TREE__CURRENT_PAGE_MENU,
      'parent_mlid' => 0,
      'title_link'  => 0,
      'admin_title' => '2nd level main menu block',
      'level'       => 1,
      'follow'      => 'active',
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 1,
    ),
    'pnw_insect-2' => array(
      'menu_name'   => MENU_TREE__CURRENT_PAGE_MENU,
      'parent_mlid' => 0,
      'title_link'  => 0,
      'admin_title' => 'home page menu block',
      'level'       => 1,
      'follow'      => 'child',
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 1,
    ),
    'pnw_insect-3' => array(
      'menu_name'   => 'book-toc-593',
      'parent_mlid' => 0,
      'title_link'  => 1,
      'admin_title' => 'Horticulture Landscape Ornamental',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-4' => array(
      'menu_name'   => MENU_TREE__CURRENT_PAGE_MENU,
      'parent_mlid' => 0,
      'title_link'  => 0,
      'admin_title' => '',
      'level'       => 1,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-5' => array(
      'menu_name'   => 'book-toc-589',
      'parent_mlid' => 0,
      'title_link'  => 1,
      'admin_title' => 'Agronomic Crops',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-6' => array(
      'menu_name'   => 'book-toc-590',
      'parent_mlid' => 0,
      'title_link'  => 1,
      'admin_title' => 'Bee protection',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-7' => array(
      'menu_name'   => 'book-toc-592',
      'parent_mlid' => 0,
      'title_link'  => 1,
      'admin_title' => 'Hay and Pasture',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-8' => array(
      'menu_name'   => 'book-toc-683',
      'parent_mlid' => 0,
      'title_link'  => 1,
      'admin_title' => 'Integrated Pest',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-9' => array(
      'menu_name'   => 'book-toc-591',
      'parent_mlid' => 0,
      'title_link'  => 1,
      'admin_title' => 'Legume Grass Field Seed',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-10' => array(
      'menu_name'   => 'book-toc-594',
      'parent_mlid' => 0,
      'title_link'  => 1,
      'admin_title' => 'Livestock',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-11' => array(
      'menu_name'   => 'book-toc-595',
      'parent_mlid' => 0,
      'title_link'  => 1,
      'admin_title' => 'Nut Crops',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-12' => array(
      'menu_name'   => 'book-toc-700',
      'parent_mlid' => 0,
      'title_link'  => 0,
      'admin_title' => 'Front',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-13' => array(
      'menu_name'   => 'book-toc-689',
      'parent_mlid' => 0,
      'title_link'  => 1,
      'admin_title' => 'Pesticide Application',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-14' => array(
      'menu_name'   => 'book-toc-696',
      'parent_mlid' => 0,
      'title_link'  => 1,
      'admin_title' => 'Safe Pesticide Use',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-15' => array(
      'menu_name'   => 'book-toc-596',
      'parent_mlid' => 0,
      'title_link'  => 1,
      'admin_title' => 'Small Fruit Crops',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-16' => array(
      'menu_name'   => 'book-toc-600',
      'parent_mlid' => 0,
      'title_link'  => 1,
      'admin_title' => 'Structural Health Pests',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-17' => array(
      'menu_name'   => 'book-toc-597',
      'parent_mlid' => 0,
      'title_link'  => 1,
      'admin_title' => 'Tree Fruit Crops',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-18' => array(
      'menu_name'   => 'book-toc-598',
      'parent_mlid' => 0,
      'title_link'  => 1,
      'admin_title' => 'Vegetable Crops',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
    'pnw_insect-19' => array(
      'menu_name'   => 'book-toc-599',
      'parent_mlid' => 0,
      'title_link'  => 1,
      'admin_title' => 'Vegetable Seed Crops',
      'level'       => 2,
      'follow'      => 0,
      'depth'       => 0,
      'expanded'    => 0,
      'sort'        => 0,
    ),
  );
}

/**
 * Implements hook_form_alter()
 */
function pnw_insect_form_alter(&$form, &$form_state, $form_id) {
  
  switch ($form_id) {
    
    case 'views_form_related_images_reorder_images': 

      $form['actions']['submit']['#submit'][] = 'reorder_images_submit';
      
    break;

  }
}

/**
 * Redirects user to node view after reordering images
 */
function reorder_images_submit($form, &$form_state) {
  drupal_set_message('Images reordered');
  $form_state['redirect'] = 'node/' . $form_state['build_info']['args'][0]->args[0];
}

